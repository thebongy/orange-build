@import 'tailwindcss';
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));
@plugin '@tailwindcss/typography';
@theme inline {
	--radius-sm:
		calc(var(--radius) - 4px);
	--radius-md:
		calc(var(--radius) - 2px);
	--radius-lg:
		var(--radius);
	--radius-xl:
		calc(var(--radius) + 4px);
	--color-background:
		var(--background);
	--color-foreground:
		var(--foreground);
	--color-card:
		var(--card);
	--color-card-foreground:
		var(--card-foreground);
	--color-popover:
		var(--popover);
	--color-popover-foreground:
		var(--popover-foreground);
	--color-primary:
		var(--primary);
	--color-primary-foreground:
		var(--primary-foreground);
	--color-secondary:
		var(--secondary);
	--color-secondary-foreground:
		var(--secondary-foreground);
	--color-muted:
		var(--muted);
	--color-muted-foreground:
		var(--muted-foreground);
	--color-accent:
		var(--accent);
	--color-accent-foreground:
		var(--accent-foreground);
	--color-destructive:
		var(--destructive);
	--color-border:
		var(--border);
	--color-input:
		var(--input);
	--color-ring:
		var(--ring);
	--color-chart-1:
		var(--chart-1);
	--color-chart-2:
		var(--chart-2);
	--color-chart-3:
		var(--chart-3);
	--color-chart-4:
		var(--chart-4);
	--color-chart-5:
		var(--chart-5);
	--shadow-textarea:
		6px 6px 13px 0px rgba(0, 0, 0, 0.04),
		24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		53px 53px 32px 0px rgba(0, 0, 0, 0.02),
		0px 0px 0px 1px rgba(217, 217, 217, 0.2);
	--color-bg-1: var(--build-chat-colors-bg-1);
	--color-bg-2: var(--build-chat-colors-bg-2);
	--color-bg-3: var(--build-chat-colors-bg-3);
	--color-bg-4: var(--build-chat-colors-bg-4);
	--color-border-primary: var(--build-chat-colors-border-primary);
	--color-border-secondary: var(--build-chat-colors-border-secondary);
	--color-border-tertiary: var(--build-chat-colors-border-tertiary);
	--color-danger: var(--build-chat-colors-danger);
	--color-brand-heavy: var(--build-chat-colors-brand-heavy);
	--color-brand-primary: var(--build-chat-colors-brand-primary);
	--color-brand-subtle: var(--build-chat-colors-brand-subtle);
	--color-text-inverted: var(--build-chat-colors-text-inverted);
	--color-text-primary: var(--build-chat-colors-text-primary);
	--color-text-secondary: var(--build-chat-colors-text-secondary);
	--color-text-tertiary: var(--build-chat-colors-text-tertiary);

	--shadow-textarea:
		6px 6px 13px 0px rgba(0, 0, 0, 0.04),
		24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		53px 53px 32px 0px rgba(0, 0, 0, 0.02),
		0px 0px 0px 1px rgba(217, 217, 217, 0.2);
	--animate-typing-dot: typing-dot 1.2s ease-in-out infinite;
	--animate-shake: shake 1s ease-in-out;
}


:root {
	--radius:
		0.625rem;
	--background:
		#fbfbfc;
	--foreground:
		oklch(0.145 0 0);
	--card:
		#ffffff;
	--card-foreground:
		oklch(0.145 0 0);
	--popover:
		oklch(1 0 0);
	--popover-foreground:
		oklch(0.145 0 0);
	--primary:
		oklch(0.205 0 0);
	--primary-foreground:
		oklch(0.985 0 0);
	--secondary:
		oklch(0.97 0 0);
	--secondary-foreground:
		oklch(0.205 0 0);
	--muted:
		oklch(0.97 0 0);
	--muted-foreground:
		oklch(0.556 0 0);
	--accent:
		oklch(0.97 0 0);
	--accent-foreground:
		oklch(0.205 0 0);
	--destructive:
		oklch(0.577 0.245 27.325);
	--border:
		oklch(0.922 0 0);
	--input:
		oklch(0.922 0 0);
	--ring:
		oklch(0.708 0 0);
	--chart-1:
		oklch(0.646 0.222 41.116);
	--chart-2:
		oklch(0.6 0.118 184.704);
	--chart-3:
		oklch(0.398 0.07 227.392);
	--chart-4:
		oklch(0.828 0.189 84.429);
	--chart-5:
		oklch(0.769 0.188 70.08);
	--build-chat-colors-bg-1: #e7e7e7;
	--build-chat-colors-bg-2: #f6f6f6;
	--build-chat-colors-bg-3: #fbfbfc;
	--build-chat-colors-bg-4: #ffffff;
	--build-chat-colors-border-primary: #e5e5e5;
	--build-chat-colors-border-secondary: #eeeeee;
	--build-chat-colors-border-tertiary: #eeeeee;
	--build-chat-colors-danger: #950000cc;
	--build-chat-colors-brand-heavy: #f6821f;
	--build-chat-colors-brand-primary: #f6821f;
	--build-chat-colors-brand-subtle: #f6821f;
	--build-chat-colors-text-inverted: #ffffff;
	--build-chat-colors-text-primary: #212121;
	--build-chat-colors-text-secondary: rgba(33, 33, 33, 0.8);
	--build-chat-colors-text-tertiary: rgba(33, 33, 33, 0.6);
}

.dark {
	/* Cloudflare-inspired dark theme with improved layering */
	--background:
		#1d1e1e; /* Base background - slightly warmer than pure black */
	--foreground:
		#ffffff; /* Pure white for primary text */
	--color-bg-light: #292929; /* Elevated surface (bg-3 from CF) */
	--color-bg: #1d1e1e; /* Main background */
	--card:
		#1f2020; /* Card background (bg-2 from CF) */
	--card-foreground:
		#ffffff; /* White text on cards */
	--popover:
		#292929; /* Popover background (bg-3) */
	--popover-foreground:
		#ffffff; /* White text */
	--primary:
		#ffffff; /* Cloudflare blue */
	--primary-foreground:
		#ffffff; /* White on primary */
	--secondary:
		#3c3c3c; /* Secondary elements (bg-4) */
	--secondary-foreground:
		rgba(255, 255, 255, 0.8); /* 80% white */
	--muted:
		#393939; /* Muted elements */
	--muted-foreground:
		rgba(255, 255, 255, 0.6); /* 60% white for tertiary text */
	--accent:
		#292929; /* Accent background */
	--accent-foreground:
		#ffffff; /* White text */
	--destructive:
		#ef4444; /* Error red */
	--border:
		#393939; /* Primary border color */
	--input:
		#292929; /* Input background */
	--ring:
		#0096ff; /* Focus ring */
	--chart-1:
		#0096ff; /* Blue */
	--chart-2:
		#10b981; /* Green */
	--chart-3:
		#f59e0b; /* Yellow */
	--chart-4:
		#8b5cf6; /* Purple */
	--chart-5:
		#ef4444; /* Red */
	
	/* Override theme colors for dark mode */
	--color-brand: #0096ff; /* Cloudflare blue */
	--color-bg: #1d1e1e; /* Main background */
	--color-text: #ffffff; /* Primary text */
	--color-text-on-brand: #ffffff; /* White on brand */
	--color-bg-lighter: #1f2020; /* Slightly elevated */
	--color-bg-light: #292929; /* More elevated */
	--color-bg-bright: #f6821f; /* Cloudflare orange */
	--color-bg-bright-dim: #f48120; /* Slightly dimmer orange */
	--color-bg-darkest: #1a1b1b; /* Darkest background */
	--build-chat-colors-bg-1: #151515;
	--build-chat-colors-bg-2: #1f2020;
	--build-chat-colors-bg-3: #292929;
	--build-chat-colors-bg-4: #3c3c3c;
	--build-chat-colors-border-primary: #393939;
	--build-chat-colors-border-secondary: #454746;
	--build-chat-colors-border-tertiary: #454746;
	--build-chat-colors-brand-heavy: #f6821f;
	--build-chat-colors-brand-primary: #f6821f;
	--build-chat-colors-brand-subtle: #f6821f;
	--build-chat-colors-text-inverted: #000000;
	--build-chat-colors-text-primary: #ffffff;
	--build-chat-colors-text-secondary: rgba(255, 255, 255, 0.8);
	--build-chat-colors-text-tertiary: rgba(255, 255, 255, 0.6);

	--shadow-dialog:
		0px 18px 60px 0px rgba(6, 6, 5, 0.1),
		3px 3px 13px 0px rgba(0, 0, 0, 0.04), -3px 3px 13px 0px rgba(0, 0, 0, 0.04),
		24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		-24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		53px 53px 32px 0px rgba(0, 0, 0, 0.02),
		0px 0px 0px 1px rgba(217, 217, 217, 0.2);
	--shadow-elevation:
		6px 6px 13px 0px rgba(0, 0, 0, 0.2),
		24px 24px 24px 0px rgba(0, 0, 0, 0.17),
		53px 53px 32px 0px rgba(0, 0, 0, 0.12),
		0px 0px 0px 1px rgba(217, 217, 217, 0.1);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
	}
  body {
    @apply bg-background text-foreground;
	}
}

@theme {
	--font-sans:
		'Inter', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
		'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';

	--color-brand: #0092b8;
	--color-bg: #fff;
	--color-text: #000;
	--color-text-on-brand: #fff;

	--color-bg-lighter: var(--background);
	--color-bg-light: #fbfbfc;

	--color-bg-bright: #0092b8;
	--color-bg-bright-dim: #0092b8;

	--color-bg-darkest: #0a0a0a;
	--shadow-dialog:
		0px 18px 60px 0px rgba(6, 6, 5, 0.1),
		3px 3px 13px 0px rgba(0, 0, 0, 0.04), -3px 3px 13px 0px rgba(0, 0, 0, 0.04),
		24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		-24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		53px 53px 32px 0px rgba(0, 0, 0, 0.02),
		0px 0px 0px 1px rgba(217, 217, 217, 0.2);
	--shadow-elevation:
		6px 6px 13px 0px rgba(0, 0, 0, 0.04),
		24px 24px 24px 0px rgba(0, 0, 0, 0.03),
		53px 53px 32px 0px rgba(0, 0, 0, 0.02),
		0px 0px 0px 1px rgba(217, 217, 217, 0.2);
	--shadow-soft-layered:
		3px 3px 13px 0px rgba(0, 0, 0, 0.04), 24px 24px 24px 0px rgba(0, 0, 0, 0.03);
}

@layer base {
	* {
		@apply border-text/10;
	}

	html,
	body,
	#root {
		height: 100%;
		@apply text-text;
		/* @media (prefers-color-scheme: dark) {
    color-scheme: dark;
  } */
	}

	body {
		background: #fbfbfc;
	}
}

/* Hack from https://stackoverflow.com/a/71876526 */
.monaco-editor {
	position: absolute !important;
}

@utility bg-graph-paper {
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.08'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}

::-webkit-scrollbar {
	width: 8px;
	height: 8px;
	background-color: transparent;
}

::-webkit-scrollbar-thumb {
	background-color: rgba(0, 0, 0, 0.2);
	border-radius: 4px;
	transition: background-color 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
	background-color: rgba(0, 0, 0, 0.3);
}

.dark ::-webkit-scrollbar-thumb {
	background-color: rgba(255, 255, 255, 0.2);
}

.dark ::-webkit-scrollbar-thumb:hover {
	background-color: rgba(255, 255, 255, 0.3);
}

::-webkit-scrollbar-corner {
	background-color: transparent;
}

/* Phase Timeline Custom Scrollbar */
.phase-timeline-scroll::-webkit-scrollbar {
	width: 6px;
}

.phase-timeline-scroll::-webkit-scrollbar-track {
	background: rgba(0, 0, 0, 0.05);
	border-radius: 3px;
}

.phase-timeline-scroll::-webkit-scrollbar-thumb {
	background: rgba(0, 0, 0, 0.2);
	border-radius: 3px;
}

.phase-timeline-scroll::-webkit-scrollbar-thumb:hover {
	background: rgba(0, 0, 0, 0.3);
}

.dark .phase-timeline-scroll::-webkit-scrollbar-track {
	background: rgba(255, 255, 255, 0.05);
}

.dark .phase-timeline-scroll::-webkit-scrollbar-thumb {
	background: rgba(255, 255, 255, 0.2);
}

.dark .phase-timeline-scroll::-webkit-scrollbar-thumb:hover {
	background: rgba(255, 255, 255, 0.3);
}

.a-tag a {
	@apply text-brand;
}

.prose {
	/* --tw-prose-invert-counters: rgb(156, 187, 192); */
	/* --tw-prose-invert-bullets: rgb(156, 187, 192); */
	--tw-prose-th-headers: --value(var(--color-text));
	--tw-prose-body: --value(var(--color-text));
	--tw-prose-headings: --value(var(--color-text));
}

/* Chat messages custom scrollbar */
.chat-messages-scroll::-webkit-scrollbar {
	width: 8px;
}

.chat-messages-scroll::-webkit-scrollbar-track {
	background: transparent;
}

.chat-messages-scroll::-webkit-scrollbar-thumb {
	background: rgba(0, 0, 0, 0.1);
	border-radius: 4px;
}

.chat-messages-scroll::-webkit-scrollbar-thumb:hover {
	background: rgba(0, 0, 0, 0.15);
}

.dark .chat-messages-scroll::-webkit-scrollbar-thumb {
	background: rgba(255, 255, 255, 0.15);
}

.dark .chat-messages-scroll::-webkit-scrollbar-thumb:hover {
	background: rgba(255, 255, 255, 0.2);
}